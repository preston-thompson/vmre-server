<!DOCTYPE html>
<html>
    <head>
        <title>Vancouver Meteor Radar Experiment</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>

        <h1>Vancouver Meteor Radar Experiment</h1>

        <a href="https://rasc-vancouver.com/"><img src="rasc-new-banner.png"/></a>

        <p>VMRE is run by members of <a href="https://rasc-vancouver.com/">RASC Vancouver</a>.</p>

        <p>Last updated ${db['last_updated_readable']}</p>

        <p>Showing last ${config.analyze_days} days worth of data.</p>

        <table>
            <tr>
                <th>Station ID</th>
                <th>Last signal timestamp</th>
            </tr>
% for station_id in stations_last_seen:
            <tr>
                <td>${str(station_id)}</td>
                <td>${stations_last_seen[station_id]}</td>
            </tr>
% endfor
        </table>

        <img src="daily.png"><br>
        <img src="timeofday.png">

        <h1>Detections (${len(db['events'])})</h1>
        <table>
            <tr>
                <th>Time</th>
                <th>Energy</th>
                <th colspan="3">Stations Online</th>
            </tr>
% for e in reversed(sorted(db['events'].values(), key=lambda k: k['datetime_str'])):
            <tr>
                <td><a href="${e['datetime_str']}.html">${e["datetime_readable"]}</a></td>
                <td>${'{0}'.format(int(e["energy"]))}</td>
        % for station_id in (1,2,3):
                <td style="background: ${'green' if station_id in e['stations_online'] else 'red'}; text-align: center;">${station_id}</td>
        %endfor
            </tr>
% endfor
        </table>

    </body>
</html>
